{"openapi":"3.1.0","info":{"title":"CzechFabric MCP API - All Domains","version":"3.0.0","description":"MCP tools for Czech public data - All Domains","contact":{"name":"CzechFabric Support","email":"support@czechfabric.cz","url":"https://czechfabric.cz/pages/contact"},"license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0.html"},"x-webhook-info":{"description":"To receive webhook notifications for async tool executions, include the X-Webhook-URL header in your tool execution requests.","headers":{"X-Webhook-URL":{"description":"URL where webhook events should be sent","example":"https://your-app.com/webhooks/czechfabric"},"X-Webhook-Secret":{"description":"Optional secret for webhook signature verification","example":"whsec_xxxxx"}}}},"servers":[{"url":"https://mcp.czechfabric.cz","description":"Production MCP Server"}],"paths":{"/mcp/tools/get_air_quality_near_location":{"post":{"summary":"Get current air quality index and main pollutants near a specific location in Prague. Automatically expands search radius or falls back to district-level data if no nearby station is found.","description":"Execute get_air_quality_near_location MCP tool","operationId":"call_get_air_quality_near_location","tags":["health","environment","air-quality","location"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"location":{"type":"string","description":"Location name, address, or landmark in Prague (e.g., 'Karlovo náměstí', 'Wenceslas Square', 'Anděl')","example":"Karlovo náměstí"},"radius_meters":{"type":"string","description":"Search radius in meters around the location (default: 2000m = 2km)","example":2000},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":["location"]},"examples":{"default":{"summary":"Example request","value":{"location":"Karlovo náměstí"}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AirQualityResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/get_air_quality_near_location -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"location\": \"Karlovo n\\u00e1m\\u011bst\\u00ed\",\n  \"radius_meters\": 2000\n}'"}]}},"/mcp/tools/get_air_quality_by_district":{"post":{"summary":"Get aggregated air quality information for a specific Prague district.","description":"Execute get_air_quality_by_district MCP tool","operationId":"call_get_air_quality_by_district","tags":["health","environment","air-quality","district"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"district":{"type":"string","description":"Prague district name or number (e.g., 'Praha 1', 'Praha 11', 'Vinohrady')","example":"Praha 1"},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":["district"]},"examples":{"default":{"summary":"Example request","value":{"district":"Praha 1"}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AirQualityResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/get_air_quality_by_district -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"district\": \"Praha 1\",\n  \"format\": \"tone\"\n}'"}]}},"/mcp/tools/get_air_quality_history":{"post":{"summary":"Get historical air quality data and pollution trends for analysis.","description":"Execute get_air_quality_history MCP tool","operationId":"call_get_air_quality_history","tags":["history","environment","trends","air-quality"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"location":{"type":"string","description":"","example":"Karlovo náměstí"},"station_id":{"type":"string","description":"","example":"ACHOA"},"days_back":{"type":"string","description":"Number of days to look back (default: 7)","example":7},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":[]},"examples":{"default":{"summary":"Example request","value":{}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AirQualityResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/get_air_quality_history -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"location\": \"Karlovo n\\u00e1m\\u011bst\\u00ed\",\n  \"station_id\": \"ACHOA\"\n}'"}]}},"/mcp/tools/list_air_quality_components":{"post":{"summary":"Get information about all pollutants measured in Prague's air quality monitoring.","description":"Execute list_air_quality_components MCP tool","operationId":"call_list_air_quality_components","tags":["education","environment","air-quality"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":[]},"examples":{"default":{"summary":"Example request","value":{}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AirQualityResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/list_air_quality_components -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"format\": \"tone\"\n}'"}]}},"/mcp/tools/get_departures":{"post":{"summary":"Get real-time public transport departures with advanced options. Returns departure times, routes, and delays.","description":"Execute get_departures MCP tool","operationId":"call_get_departures","tags":["transport","schedule","mobility"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"stop_name":{"type":"string","description":"Stop name or landmark (e.g. 'Anděl metro', 'Main Station')","example":"Anděl"},"when":{"type":"string","description":"","example":"now"},"arrive_by":{"type":"string","description":"","example":"in 30 minutes"},"mode":{"type":"string","description":"Filter by transport mode","example":"metro"},"max_results":{"type":"string","description":"Maximum number of departures to return (1–50)","example":10},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":["stop_name"]},"examples":{"default":{"summary":"Example request","value":{"stop_name":"Anděl"}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StructuredDepartureResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/get_departures -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"stop_name\": \"And\\u011bl\",\n  \"when\": \"now\"\n}'"}]}},"/mcp/tools/departures_by_coordinates":{"post":{"summary":"Find nearest public transport stop by GPS coordinates and show upcoming departures","description":"Execute departures_by_coordinates MCP tool","operationId":"call_departures_by_coordinates","tags":["departures","gps","location","coordinates"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"latitude":{"type":"number","description":"Latitude in decimal degrees (WGS84)","example":50.0755},"longitude":{"type":"number","description":"Longitude in decimal degrees (WGS84)","example":14.4378},"search_radius":{"type":"string","description":"Maximum search distance in meters (default 500m)","example":500},"max_results":{"type":"integer","description":"Maximum number of departures to return (20–50)","example":10},"mode":{"type":"string","description":"Filter by transport mode (e.g. bus, tram, metro, train)","example":"metro"},"when":{"type":"string","description":"","example":"now"},"arrive_by":{"type":"string","description":"","example":"in 30 minutes"},"timezone":{"type":"string","description":"","example":"example_timezone"},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":["latitude","longitude"]},"examples":{"default":{"summary":"Example request","value":{"latitude":50.0755,"longitude":14.4378}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StructuredDepartureResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/departures_by_coordinates -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"latitude\": 50.0755,\n  \"longitude\": 14.4378\n}'"}]}},"/mcp/tools/suggest_departure_stops_nearby":{"post":{"summary":"Suggest nearby stops with departures and metadata like modes, accessibility, and distance.","description":"Execute suggest_departure_stops_nearby MCP tool","operationId":"call_suggest_departure_stops_nearby","tags":["transport","recommendation","fallback"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"latitude":{"type":"number","description":"Latitude in decimal degrees","example":50.0755},"longitude":{"type":"number","description":"Longitude in decimal degrees","example":14.4378},"radius":{"type":"integer","description":"Search radius in meters (default: 500)","example":500},"mode":{"type":"string","description":"Transport mode to prioritize (e.g. tram, bus)","example":"metro"},"when":{"type":"string","description":"","example":"now"},"arrive_by":{"type":"string","description":"","example":"in 30 minutes"},"max_suggestions":{"type":"integer","description":"Maximum number of stops to return","example":10}},"required":["latitude","longitude"]},"examples":{"default":{"summary":"Example request","value":{"latitude":50.0755,"longitude":14.4378}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StructuredDepartureResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/suggest_departure_stops_nearby -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"latitude\": 50.0755,\n  \"longitude\": 14.4378\n}'"}]}},"/mcp/tools/geocode":{"post":{"summary":"Convert a place or stop name into coordinates using GTFS matching or OpenStreetMap fallback.","description":"Execute geocode MCP tool","operationId":"call_geocode","tags":["location","coordinates","geocoding"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Name of the place or public transport stop (e.g., 'Florenc')","example":"Florenc"},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":["name"]},"examples":{"default":{"summary":"Example request","value":{"name":"Florenc"}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeocodeResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/geocode -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"name\": \"Florenc\",\n  \"format\": \"tone\"\n}'"}]}},"/mcp/tools/reverse_geocode":{"post":{"summary":"Find the nearest known public transport stop to a given coordinate.","description":"Execute reverse_geocode MCP tool","operationId":"call_reverse_geocode","tags":["transport","location","reverse-geocoding"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"latitude":{"type":"number","description":"Latitude in decimal degrees","example":50.0755},"longitude":{"type":"number","description":"Longitude in decimal degrees","example":14.4378},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":["latitude","longitude"]},"examples":{"default":{"summary":"Example request","value":{"latitude":50.0755,"longitude":14.4378}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReverseGeocodeResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/reverse_geocode -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"latitude\": 50.0755,\n  \"longitude\": 14.4378\n}'"}]}},"/mcp/tools/list_all_stops":{"post":{"summary":"List all known public transport stops, optionally filtered by name or zone.","description":"Execute list_all_stops MCP tool","operationId":"call_list_all_stops","tags":["search","transport","stops"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"name_contains":{"type":"string","description":"","example":"example_name_contains"},"zone":{"type":"string","description":"","example":"example_zone"},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":[]},"examples":{"default":{"summary":"Example request","value":{}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StopListResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/list_all_stops -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"name_contains\": \"example_name_contains\",\n  \"zone\": \"example_zone\"\n}'"}]}},"/mcp/tools/get_stop_metadata":{"post":{"summary":"Retrieve metadata for a specific stop by GTFS stop ID or name.","description":"Execute get_stop_metadata MCP tool","operationId":"call_get_stop_metadata","tags":["metadata","stop","lookup"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"stop_id":{"type":"string","description":"","example":"example_stop_id"},"stop_name":{"type":"string","description":"","example":"Anděl"},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":[]},"examples":{"default":{"summary":"Example request","value":{}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StopMetadataResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/get_stop_metadata -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"stop_id\": \"example_stop_id\",\n  \"stop_name\": \"And\\u011bl\"\n}'"}]}},"/mcp/tools/find_all_stops_near":{"post":{"summary":"Find all public transport stops within a radius around coordinates.","description":"Execute find_all_stops_near MCP tool","operationId":"call_find_all_stops_near","tags":["transport","location","radius"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"latitude":{"type":"number","description":"Latitude in decimal degrees","example":50.0755},"longitude":{"type":"number","description":"Longitude in decimal degrees","example":14.4378},"radius":{"type":"integer","description":"Search radius in meters (default 500)","example":500},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":["latitude","longitude"]},"examples":{"default":{"summary":"Example request","value":{"latitude":50.0755,"longitude":14.4378}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NearbyStopsResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/find_all_stops_near -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"latitude\": 50.0755,\n  \"longitude\": 14.4378\n}'"}]}},"/mcp/tools/plan_route_mapycz":{"post":{"summary":"Plan a route using Mapy.cz and get fully structured step-by-step instructions.","description":"Execute plan_route_mapycz MCP tool","operationId":"call_plan_route_mapycz","tags":["mapycz","trip","routing"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"description":"Tool parameters","content":{"application/json":{"schema":{"type":"object","properties":{"from_place":{"type":"string","description":"Start location (name or address)","example":"Prague Main Station"},"to_place":{"type":"string","description":"End location (name or address)","example":"Charles Bridge"},"mode":{"type":"string","description":"Routing type (car_fast, foot_fast, etc.)","example":"metro"},"avoid_toll":{"type":"boolean","description":"Avoid toll roads","example":false},"waypoints":{"type":"string","description":"","example":"example_waypoints"},"lang":{"type":"string","description":"Output language for metadata (cs or en)","example":"en"},"format":{"type":"string","description":"Response format: 'tone' (token-efficient TONE format, default), 'json' (standard JSON), or 'both' (includes both formats)","example":"tone"}},"required":["from_place","to_place"]},"examples":{"default":{"summary":"Example request","value":{"from_place":"Prague Main Station","to_place":"Charles Bridge"}}}}}},"responses":{"200":{"description":"Successful tool execution","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MapyRouteStructuredResponse"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"401":{"description":"Unauthorized - invalid or missing API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}},"x-code-samples":[{"lang":"curl","source":"curl -X POST https://mcp.czechfabric.cz/mcp/tools/plan_route_mapycz -H 'Authorization: Bearer YOUR_TOKEN' -H 'Content-Type: application/json' -d '{\n  \"from_place\": \"Prague Main Station\",\n  \"to_place\": \"Charles Bridge\"\n}'"}]}}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"GeocodeResponse":{"$defs":{"Coordinates":{"properties":{"latitude":{"description":"Latitude in decimal degrees","title":"Latitude","type":"number"},"longitude":{"description":"Longitude in decimal degrees","title":"Longitude","type":"number"}},"required":["latitude","longitude"],"title":"Coordinates","type":"object"}},"properties":{"coordinates":{"anyOf":[{"$ref":"#/$defs/Coordinates"},{"type":"null"}],"default":null,"description":"Coordinates resolved from the place name, or None if not found"},"speech_response":{"description":"Natural language summary of the geocoding result","title":"Speech Response","type":"string"},"fallback":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":null,"description":"True if fallback method (e.g. Nominatim) was used","title":"Fallback"}},"required":["speech_response"],"type":"object"},"ReverseGeocodeResponse":{"$defs":{"Coordinates":{"properties":{"latitude":{"description":"Latitude in decimal degrees","title":"Latitude","type":"number"},"longitude":{"description":"Longitude in decimal degrees","title":"Longitude","type":"number"}},"required":["latitude","longitude"],"title":"Coordinates","type":"object"}},"properties":{"place_name":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Name of the nearest stop or place","title":"Place Name"},"coordinates":{"anyOf":[{"$ref":"#/$defs/Coordinates"},{"type":"null"}],"default":null,"description":"Coordinates of the resolved location"},"distance_meters":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Distance from input location to nearest stop (in meters)","title":"Distance Meters"},"speech_response":{"description":"Natural language summary of the reverse geocoding result","title":"Speech Response","type":"string"}},"required":["speech_response"],"type":"object"},"StructuredDepartureResponse":{"$defs":{"Coordinates":{"properties":{"latitude":{"description":"Latitude in decimal degrees","title":"Latitude","type":"number"},"longitude":{"description":"Longitude in decimal degrees","title":"Longitude","type":"number"}},"required":["latitude","longitude"],"title":"Coordinates","type":"object"},"DepartureItem":{"properties":{"line":{"description":"Route line number or name (e.g. 191, A, C)","title":"Line","type":"string"},"headsign":{"description":"Destination or headsign of the vehicle","title":"Headsign","type":"string"},"mode":{"$ref":"#/$defs/TransportMode","description":"Type of transport (e.g. bus, tram, metro)"},"departure_timestamp":{"$ref":"#/$defs/DepartureTimestamp","description":"Structured scheduled/predicted departure times"},"delay_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Estimated delay in minutes, if known","title":"Delay Minutes"},"platform":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Platform or stop position (e.g. '2A')","title":"Platform"},"coordinates":{"anyOf":[{"$ref":"#/$defs/Coordinates"},{"type":"null"}],"default":null,"description":"Exact departure location if available"}},"required":["line","headsign","mode","departure_timestamp"],"title":"DepartureItem","type":"object"},"DepartureTimestamp":{"properties":{"scheduled":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"default":null,"description":"Scheduled departure time in ISO 8601 format","title":"Scheduled"},"predicted":{"anyOf":[{"format":"date-time","type":"string"},{"type":"null"}],"default":null,"description":"Predicted real-time departure time, if available","title":"Predicted"},"minutes":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"String like '<1' or '5' indicating minutes until departure","title":"Minutes"}},"title":"DepartureTimestamp","type":"object"},"NearbyStop":{"properties":{"stop_id":{"description":"GTFS stop ID","title":"Stop Id","type":"string"},"stop_name":{"description":"Name of the nearby stop","title":"Stop Name","type":"string"},"coordinates":{"$ref":"#/$defs/Coordinates","description":"Location of the stop"},"distance_meters":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Distance from the query location in meters","title":"Distance Meters"},"modes_available":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"default":null,"description":"List of available transport modes at the stop (e.g. tram, metro, bus)","title":"Modes Available"},"wheelchair_accessible":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":null,"description":"Whether the stop supports wheelchair boarding","title":"Wheelchair Accessible"},"platform_code":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Platform code or identifier for the stop","title":"Platform Code"}},"required":["stop_id","stop_name","coordinates"],"title":"NearbyStop","type":"object"},"TransportMode":{"description":"Canonical transport mode used across CzechFabric tools.","enum":["tram","metro","bus","train","ferry","funicular","cable_car","gondola","all"],"title":"TransportMode","type":"string"}},"properties":{"stop_name":{"description":"Resolved or matched stop name","title":"Stop Name","type":"string"},"departures":{"description":"List of upcoming departures from the stop","items":{"$ref":"#/$defs/DepartureItem"},"title":"Departures","type":"array"},"fallback":{"default":false,"description":"True if geocoding or API fallback method was used","title":"Fallback","type":"boolean"},"infotexts":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"description":"Optional alerts, notices, or info texts related to the stop","title":"Infotexts"},"alternative_stops":{"anyOf":[{"items":{"$ref":"#/$defs/NearbyStop"},"type":"array"},{"type":"null"}],"default":null,"description":"Structured list of alternative nearby stops with available departures","title":"Alternative Stops"}},"required":["stop_name","departures"],"type":"object"},"StopMetadataResponse":{"$defs":{"Coordinates":{"properties":{"latitude":{"description":"Latitude in decimal degrees","title":"Latitude","type":"number"},"longitude":{"description":"Longitude in decimal degrees","title":"Longitude","type":"number"}},"required":["latitude","longitude"],"title":"Coordinates","type":"object"},"StopMetadata":{"properties":{"stop_id":{"description":"GTFS stop ID","title":"Stop Id","type":"string"},"stop_name":{"description":"Name of the public transport stop","title":"Stop Name","type":"string"},"coordinates":{"$ref":"#/$defs/Coordinates","description":"Location of the stop"},"zone_id":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Zone or fare ID","title":"Zone Id"},"platform_code":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Platform or track code (if available)","title":"Platform Code"},"stop_desc":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Additional stop description (if available)","title":"Stop Desc"},"location_type":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Type of location, e.g., stop or station","title":"Location Type"}},"required":["stop_id","stop_name","coordinates"],"title":"StopMetadata","type":"object"}},"properties":{"metadata":{"anyOf":[{"$ref":"#/$defs/StopMetadata"},{"type":"null"}],"default":null,"description":"Detailed metadata for the requested stop (or None if not found)"},"speech_response":{"description":"Summary suitable for conversational responses","title":"Speech Response","type":"string"}},"required":["speech_response"],"type":"object"},"NearbyStopsResponse":{"$defs":{"Coordinates":{"properties":{"latitude":{"description":"Latitude in decimal degrees","title":"Latitude","type":"number"},"longitude":{"description":"Longitude in decimal degrees","title":"Longitude","type":"number"}},"required":["latitude","longitude"],"title":"Coordinates","type":"object"},"NearbyStop":{"properties":{"stop_id":{"description":"GTFS stop ID","title":"Stop Id","type":"string"},"stop_name":{"description":"Name of the nearby stop","title":"Stop Name","type":"string"},"coordinates":{"$ref":"#/$defs/Coordinates","description":"Location of the stop"},"distance_meters":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Distance from the query location in meters","title":"Distance Meters"},"modes_available":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"default":null,"description":"List of available transport modes at the stop (e.g. tram, metro, bus)","title":"Modes Available"},"wheelchair_accessible":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":null,"description":"Whether the stop supports wheelchair boarding","title":"Wheelchair Accessible"},"platform_code":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Platform code or identifier for the stop","title":"Platform Code"}},"required":["stop_id","stop_name","coordinates"],"title":"NearbyStop","type":"object"}},"properties":{"count":{"description":"Number of nearby stops found","title":"Count","type":"integer"},"stops":{"description":"List of stops within the search radius","items":{"$ref":"#/$defs/NearbyStop"},"title":"Stops","type":"array"},"speech_response":{"description":"Natural summary of search results","title":"Speech Response","type":"string"}},"required":["count","stops","speech_response"],"type":"object"},"StopListResponse":{"$defs":{"Coordinates":{"properties":{"latitude":{"description":"Latitude in decimal degrees","title":"Latitude","type":"number"},"longitude":{"description":"Longitude in decimal degrees","title":"Longitude","type":"number"}},"required":["latitude","longitude"],"title":"Coordinates","type":"object"},"StopBasic":{"properties":{"stop_id":{"description":"GTFS stop ID","title":"Stop Id","type":"string"},"stop_name":{"description":"Name of the public transport stop","title":"Stop Name","type":"string"},"coordinates":{"$ref":"#/$defs/Coordinates","description":"Location of the stop"},"zone_id":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Fare or operational zone ID","title":"Zone Id"}},"required":["stop_id","stop_name","coordinates"],"title":"StopBasic","type":"object"}},"properties":{"count":{"description":"Total number of matching stops found","title":"Count","type":"integer"},"stops":{"description":"List of basic stop information","items":{"$ref":"#/$defs/StopBasic"},"title":"Stops","type":"array"},"speech_response":{"description":"Summary for voice/chat output","title":"Speech Response","type":"string"}},"required":["count","stops","speech_response"],"type":"object"},"MapyRouteStructuredResponse":{"$defs":{"Coordinates":{"properties":{"latitude":{"description":"Latitude in decimal degrees","title":"Latitude","type":"number"},"longitude":{"description":"Longitude in decimal degrees","title":"Longitude","type":"number"}},"required":["latitude","longitude"],"title":"Coordinates","type":"object"},"RouteStep":{"properties":{"text":{"description":"Human-readable instruction (optional; can be empty if LLM will format)","title":"Text","type":"string"},"instruction_type":{"description":"Type of navigation instruction, e.g., 'start', 'turn_left', 'continue', 'end'","title":"Instruction Type","type":"string"},"location":{"$ref":"#/$defs/Coordinates","description":"Location coordinates where this step takes place"},"distance_meters":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Distance covered in this step, in meters","title":"Distance Meters"},"estimated_time_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":null,"description":"Estimated time to complete this step, in seconds","title":"Estimated Time Seconds"}},"required":["text","instruction_type","location"],"title":"RouteStep","type":"object"}},"properties":{"instructions":{"anyOf":[{"items":{"$ref":"#/$defs/RouteStep"},"type":"array"},{"type":"null"}],"description":"Structured step-by-step navigation instructions","title":"Instructions"},"duration_seconds":{"description":"Total estimated duration of the route in seconds","title":"Duration Seconds","type":"integer"},"length_meters":{"description":"Total estimated length of the route in meters","title":"Length Meters","type":"integer"},"geometry":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"default":null,"description":"Raw GeoJSON geometry of the route (optional)","title":"Geometry"},"start_address":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Resolved name of the starting location (if available)","title":"Start Address"},"end_address":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null,"description":"Resolved name of the destination (if available)","title":"End Address"},"mapy_url":{"description":"Mapy.cz shareable URL for visualizing the route","title":"Mapy Url","type":"string"}},"required":["instructions","duration_seconds","length_meters","mapy_url"],"type":"object"},"Coordinates":{"properties":{"latitude":{"description":"Latitude in decimal degrees","title":"Latitude","type":"number"},"longitude":{"description":"Longitude in decimal degrees","title":"Longitude","type":"number"}},"required":["latitude","longitude"],"type":"object"},"AirQualityResponse":{"type":"object","properties":{"success":{"type":"boolean"},"air_quality_index":{"type":"number"},"air_quality_description":{"type":"string"},"health_recommendation":{"type":"string"},"main_pollutants":{"type":"array","items":{"type":"string"}},"stations_analyzed":{"type":"integer"}}},"ErrorResponse":{"type":"object","properties":{"error":{"type":"string","description":"Error message"},"detail":{"type":"string","description":"Detailed error information"}},"required":["error"]}}},"webhooks":{"toolExecutionComplete":{"post":{"summary":"Tool execution completed webhook","description":"Called when an async tool execution completes. Subscribe by providing a callback URL in the X-Webhook-URL header when calling a tool.","operationId":"onToolExecutionComplete","tags":["webhooks"],"requestBody":{"description":"Webhook payload with execution results","content":{"application/json":{"schema":{"type":"object","properties":{"event":{"type":"string","enum":["tool.execution.completed","tool.execution.failed"],"description":"Event type"},"execution_id":{"type":"string","description":"Unique execution identifier"},"tool_name":{"type":"string","description":"Name of the executed tool"},"timestamp":{"type":"string","format":"date-time","description":"Execution completion timestamp"},"duration_ms":{"type":"integer","description":"Execution duration in milliseconds"},"result":{"description":"Tool execution result (only for completed events)","oneOf":[{"$ref":"#/components/schemas/GeocodeResponse"},{"$ref":"#/components/schemas/StructuredDepartureResponse"},{"type":"object"}]},"error":{"type":"object","description":"Error details (only for failed events)","properties":{"code":{"type":"string"},"message":{"type":"string"}}}},"required":["event","execution_id","tool_name","timestamp"]},"examples":{"success":{"summary":"Successful execution","value":{"event":"tool.execution.completed","execution_id":"exec_123abc","tool_name":"get_departures","timestamp":"2024-01-15T10:30:00Z","duration_ms":1250,"result":{"stop_name":"Anděl","departures":[{"line":"B","headsign":"Černý Most","mode":"metro","minutes":"2"}]}}},"failure":{"summary":"Failed execution","value":{"event":"tool.execution.failed","execution_id":"exec_456def","tool_name":"get_departures","timestamp":"2024-01-15T10:31:00Z","duration_ms":350,"error":{"code":"STOP_NOT_FOUND","message":"The specified stop could not be found"}}}}}}},"responses":{"200":{"description":"Webhook received successfully"}}}}}}